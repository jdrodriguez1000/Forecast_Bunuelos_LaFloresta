# Configuraci칩n del Proyecto: Pron칩stico Bu침uelos La Floresta
# Este archivo centraliza los par치metros operativos y el contrato de datos.

project_name: "Bu침uelos La Floresta Forecasting"

# 游늭 Rutas del Sistema (Single Source of Truth)
paths:
  raw_data: "data/01_raw/ventas_mensuales.csv"
  cleansed_data: "data/02_cleansed/"
  features_data: "data/03_features/"
  processed_data: "data/04_processed/"
  reports: "outputs/reports/"
  figures: "outputs/figures/"
  models: "outputs/models/"
  metrics: "outputs/metrics/"

# 游닆 Contrato de Datos (Schema Enforcement - Phase 1)
# Aqu칤 definimos exactamente qu칠 columnas permitimos y de qu칠 tipo deben ser.
data_contract:
  columns:
    fecha: "datetime"
    unidades_vendidas_mensuales: "int"
  allow_extra_columns: false  # Si viene una columna no declarada, el sistema fallar치.

# 游 Par치metros del Modelo y Negocio
forecasting:
  horizon: 6            # Pron칩stico obligatorio de 6 meses (X+1 a X+6)
  random_state: 42      # Semilla para reproducibilidad total
  test_size: 0.2        # Proporci칩n para validaci칩n inicial

# 游댌 Configuraci칩n de Descubrimiento (Phase 1)
discovery:
  sentinel_values_numeric: [0, -1, 99, 999, 9999]
  sentinel_values_categorical: [" ", "N/A", "NA", "UNKNOWN", "EMPTY"]
  output_report_name: "phase_01_discovery_report.json"

# 游빞 Configuraci칩n de Preprocesamiento (Phase 2)
preprocessing:
  rename_columns:
    unidades_vendidas_mensuales: "unidades"
    
  sentinels:
    values: [0, -1, 999, 9999]
    action: "validate_and_nan"  # Convertir a NaN para imputaci칩n posterior

  time_series:
    frequency: "MS"             # Inicio de mes (Month Start)
    exclude_current_month: true # Regla del Mes X: Cortar datos del mes en curso
    date_column: "fecha"

  imputation:
    method: "ffill"             # Forward Fill para mantener la inercia
    fallback_method: "bfill"    # Backfill solo si el primer dato es nulo
    
  outliers:
    method: "iqr"               # M칠todo robusto Intercuartil
    iqr_multiplier: 1.5         # Sensibilidad est치ndar
    flag_column: "es_atipico"   # Nombre de la nueva columna binaria
    
  output:
    filename: "ventas_preprocesadas.csv"
    report_name: "phase_02_preprocessing_report.json"

# 游늵 Configuraci칩n de An치lisis Exploratorio (EDA - Phase 3)
eda:
  input:
    sales_file: "ventas_preprocesadas.csv"
    macro_file: "macro_colombia.csv" # Ubicado en data/03_features/
  
  output:
    report_name: "phase_03_summary_eda.json"
    figures_dir: "eda/"

  splitting:
    method: "fixed_range"
    description: "Divisi칩n por fechas fijas para reproducibilidad total"
    
    # 1. ENTRENAMIENTO: Toda la historia antigua hasta finales de 2023
    train:
      start_date: "2018-01-01" 
      end_date: "2023-12-01"
      
    # 2. VALIDACI칍N: A침o completo 2024 (Ciclo completo estacional)
    validation:
      start_date: "2024-01-01"
      end_date: "2024-12-01"
      
    # 3. TEST: A침o 2025 (Hasta donde tengamos datos, simulando futuro)
    test:
      start_date: "2025-01-01"
      end_date: "2025-12-01"

  business_rules:
    structural_breaks:
      covid_period:
        start: "2020-05-01"
        end: "2021-02-28"
        label: "Impacto_COVID_Pandemia"
      
      gran_superficie_contract:
        start: "2022-06-01"
        label: "Cambio_Nivel_Retail"
    
    seasonal_events:
      feria_flores:
        month: 8
        label: "Evento_Feria_Flores"
      semana_santa:
        method: "dynamic"
        label: "Evento_Semana_Santa_Movil"
      picos_demanda:
        fin_ano: [12, 1]
        mitad_ano: [6, 7]

    exogenous_variables:
      economic: ["IPC", "TRM"]
      calendar: ["Festivos_Mes", "Fines_Semana_Mes"]

  analysis_params:
    lags_plot: 24 
    stationarity_threshold: 0.05
    decomposition_model: "additive"
